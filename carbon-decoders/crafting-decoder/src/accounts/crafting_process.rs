//! This code was AUTOGENERATED using the Codama library.
use carbon_core::CarbonDeserialize;
use carbon_core::borsh;
use carbon_core::deserialize::CarbonDeserialize;
use solana_pubkey::Pubkey;

use crate::types::ProcessStatus;

/// This account represents crafting in progress

#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
#[derive(Debug, Clone, borsh::BorshSerialize, CarbonDeserialize, PartialEq)]
pub struct CraftingProcess {
    /// The data version of this account.
    pub version: u8,
    /// the crafting id
    pub crafting_id: u64,
    /// the owner/authority of this crafting process
    pub authority: Pubkey,
    /// the recipe
    pub recipe: Pubkey,
    /// the crafting facility
    pub crafting_facility: Pubkey,
    /// used to check if expected inputs have been supplied
    pub inputs_checksum: [u8; 16],
    /// used to check if expected outputs have been claimed
    pub outputs_checksum: [u8; 16],
    /// Quantity of outputs to craft
    pub quantity: u64,
    /// The status of this crafting process
    pub status: ProcessStatus,
    /// the start timestamp
    pub start_time: i64,
    /// the end timestamp
    pub end_time: i64,
    /// Whether or not to deny permission-less claiming.  True when > 0
    pub deny_permissionless_claiming: u8,
    /// Whether or not to local time supplied by the location.  True when > 0
    pub use_local_time: u8,
    /// bump for PDA
    pub bump: u8,
}

impl CraftingProcess {
    pub fn decode(data: &[u8]) -> Option<Self> {
        if data.len() < 8 {
            return None;
        }
        let discriminator = &data[0..8];
        if discriminator != &[105, 184, 5, 105, 175, 112, 13, 169] {
            return None;
        }

        let data_slice = data;

        let data_slice = &data_slice[8..];

        Self::deserialize(data_slice)
    }
}

//! This code was AUTOGENERATED using the Codama library.
use carbon_core::CarbonDeserialize;
use carbon_core::borsh;
use carbon_core::deserialize::CarbonDeserialize;
use solana_pubkey::Pubkey;

/// Starbase

#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
#[derive(Debug, Clone, borsh::BorshSerialize, CarbonDeserialize, PartialEq)]
pub struct Starbase {
    /// The data version of this `Starbase` account.
    pub version: u8,
    /// the game_id that this `Starbase` belongs to
    pub game_id: Pubkey,
    /// the sector that this `Starbase` belongs to
    pub sector: [i64; 2],
    /// the [`CraftingFacility`] to use for crafting at this `Starbase`
    pub crafting_facility: Pubkey,
    /// the [`CraftingFacility`] to use for upgrade jobs at this `Starbase`
    pub upgrade_facility: Pubkey,
    /// The name of this `Starbase`
    #[cfg_attr(feature = "serde", serde(with = "serde_big_array::BigArray"))]
    pub name: [u8; 64],
    /// coordinates as [x, y]
    pub sub_coordinates: [i64; 2],
    /// The faction of the `Starbase`.
    pub faction: u8,
    /// bump for PDA
    pub bump: u8,
    /// The sequence id for the `Starbase`
    pub seq_id: u16,
    /// The state of the `Starbase`. Is a [`StarbaseState`].
    pub state: u8,
    /// The level of the `Starbase`.
    pub level: u8,
    /// The `Starbase` health points.
    pub hp: u64,
    /// The `Starbase` shield points.
    pub sp: u64,
    /// The planet position (`sector::state::Ring`) available for this `Starbase`
    pub sector_ring_available: u8,
    /// The `Starbase` upgrade state
    pub upgrade_state: u8,
    /// used to check if expected upgrade ingredients have been supplied
    pub upgrade_ingredients_checksum: [u8; 16],
    /// number of ingredients needed for starbase upgrade
    pub num_upgrade_ingredients: u8,
    /// The balance of ammo for upkeep
    pub upkeep_ammo_balance: u64,
    /// The last time ammo for upkeep was updated (Local time)
    pub upkeep_ammo_last_update: i64,
    /// The last time ammo for upkeep was updated (Global time)
    pub upkeep_ammo_global_last_update: i64,
    /// The balance of food for upkeep
    pub upkeep_food_balance: u64,
    /// The last time food for upkeep was updated (Local time)
    pub upkeep_food_last_update: i64,
    /// The last time food for upkeep was updated (Global time)
    pub upkeep_food_global_last_update: i64,
    /// The balance of toolkits for upkeep
    pub upkeep_toolkit_balance: u64,
    /// The last time toolkits for upkeep was updated (Local time)
    pub upkeep_toolkit_last_update: i64,
    /// The last time toolkits for upkeep was updated (Global time)
    pub upkeep_toolkit_global_last_update: i64,
    /// The last time the starbase was built or destroyed
    pub built_destroyed_timestamp: i64,
    /// The time at which SP can resume regenerating
    pub shield_break_delay_expires_at: i64,
}

impl Starbase {
    pub fn decode(data: &[u8]) -> Option<Self> {
        if data.len() < 8 {
            return None;
        }
        let discriminator = &data[0..8];
        if discriminator != &[204, 182, 29, 231, 220, 29, 52, 2] {
            return None;
        }

        let data_slice = data;

        let data_slice = &data_slice[8..];

        Self::deserialize(data_slice)
    }
}

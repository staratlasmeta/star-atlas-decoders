//! This code was AUTOGENERATED using the Codama library.
use carbon_core::graphql::primitives::I64;
use carbon_core::graphql::primitives::Pubkey;
use carbon_core::graphql::primitives::U8;
use carbon_core::graphql::primitives::U32;
use juniper::GraphQLObject;

#[derive(Debug, Clone, GraphQLObject)]
#[graphql(name = "SurveyDataUnitTracker")]
pub struct SurveyDataUnitTrackerGraphQL {
    pub account_metadata: crate::accounts::graphql::AccountMetadataGraphQL,
    pub version: U8,
    pub game_id: Pubkey,
    pub sdu_mint: Pubkey,
    pub resource_mint: Pubkey,
    pub signer: Pubkey,
    pub signer_bump: U8,
    pub coordinates_range: Vec<I64>,
    pub css_coordinates: Vec<Vec<I64>>,
    pub origin_coordinates: Vec<I64>,
    pub css_max_distance: U32,
    pub origin_max_distance: U32,
    pub distance_weighting: U32,
    pub t_max: I64,
    pub x_mul: U32,
    pub y_mul: U32,
    pub z_mul: U32,
    pub sdu_max_per_sector: U32,
    pub scan_chance_regen_period: i32,
}

impl TryFrom<crate::accounts::postgres::SurveyDataUnitTrackerRow> for SurveyDataUnitTrackerGraphQL {
    type Error = carbon_core::error::Error;
    fn try_from(
        row: crate::accounts::postgres::SurveyDataUnitTrackerRow,
    ) -> Result<Self, Self::Error> {
        Ok(Self {
            account_metadata: row.account_metadata.into(),
            version: carbon_core::graphql::primitives::U8((*row.version) as u8),
            game_id: carbon_core::graphql::primitives::Pubkey(row.game_id.0),
            sdu_mint: carbon_core::graphql::primitives::Pubkey(row.sdu_mint.0),
            resource_mint: carbon_core::graphql::primitives::Pubkey(row.resource_mint.0),
            signer: carbon_core::graphql::primitives::Pubkey(row.signer.0),
            signer_bump: carbon_core::graphql::primitives::U8((*row.signer_bump) as u8),
            coordinates_range: row
                .coordinates_range
                .into_iter()
                .map(|item| carbon_core::graphql::primitives::I64(item))
                .collect(),
            css_coordinates: row
                .css_coordinates
                .0
                .into_iter()
                .map(|item| {
                    item.into_iter()
                        .map(|item| carbon_core::graphql::primitives::I64(item))
                        .collect()
                })
                .collect(),
            origin_coordinates: row
                .origin_coordinates
                .into_iter()
                .map(|item| carbon_core::graphql::primitives::I64(item))
                .collect(),
            css_max_distance: carbon_core::graphql::primitives::U32((*row.css_max_distance) as u32),
            origin_max_distance: carbon_core::graphql::primitives::U32(
                (*row.origin_max_distance) as u32,
            ),
            distance_weighting: carbon_core::graphql::primitives::U32(
                (*row.distance_weighting) as u32,
            ),
            t_max: carbon_core::graphql::primitives::I64(row.t_max),
            x_mul: carbon_core::graphql::primitives::U32((*row.x_mul) as u32),
            y_mul: carbon_core::graphql::primitives::U32((*row.y_mul) as u32),
            z_mul: carbon_core::graphql::primitives::U32((*row.z_mul) as u32),
            sdu_max_per_sector: carbon_core::graphql::primitives::U32(
                (*row.sdu_max_per_sector) as u32,
            ),
            scan_chance_regen_period: row.scan_chance_regen_period as i32,
        })
    }
}
